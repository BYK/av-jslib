<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="content-type"        content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type"  content="text/css" />
<meta http-equiv="content-script-type" content="text/javascript" />
<meta name="generator" content="JsDoc Toolkit 1.4.1" />
<title>JsDoc &raquo; Visual Effects&Functions Library &raquo; aV.main.visual.js</title>
<link href="default.css" type="text/css" rel="stylesheet" media="all" />
<script src="default.js" type="text/javascript"></script>

</head>
<body id="pagetop">
<div id="body">



<!--============= HEADER ============-->
<div id="header">
	<ul>
		<li><a href="index.html">JsDoc</a></li>
		<li><a href="07_file.html">Visual Effects&Functions Library</a></li>
		<li><a href="07_src.html">aV.main.visual.js</a></li>
	</ul>
</div>
<!--============ /HEADER ============-->



<div id="layout">



<!--============== NAV ==============-->
<div id="nav">
	
	<div class="close">
		<h2>
			<span class="name"><a href="00_file.html">AJAX&XML Library</a></span>
			
				<span class="ico"><a href="#"></a></span>
			
		</h2>
		<div class="list">
		
			
				<h3>Constructors</h3>
				<ul>
					
						<li><a href="00_file.html#AJAX">AJAX</a></li>
					
						<li><a href="00_file.html#AJAX.XML">AJAX.XML</a></li>
					
				</ul>
			
			
				<h3>Objects</h3>
				<ul>
					
						<li><a href="00_file.html#AJAX.activeRequestCount">AJAX.activeRequestCount</a></li>
					
				</ul>
			
		
		</div>
	</div>
	
	<div class="close">
		<h2>
			<span class="name"><a href="01_file.html">DBGrid class</a></span>
			
				<span class="ico"><a href="#"></a></span>
			
		</h2>
		<div class="list">
		
			
				<h3>Constructors</h3>
				<ul>
					
						<li><a href="01_file.html#DBGrid">DBGrid</a></li>
					
				</ul>
			
			
				<h3>Objects</h3>
				<ul>
					
						<li><a href="01_file.html#DBGrid._lastGuid">DBGrid._lastGuid</a></li>
					
						<li><a href="01_file.html#DBGrid.dataAddress">DBGrid.dataAddress</a></li>
					
						<li><a href="01_file.html#DBGrid.guid">DBGrid.guid</a></li>
					
						<li><a href="01_file.html#DBGrid.parameters">DBGrid.parameters</a></li>
					
						<li><a href="01_file.html#DBGrid.sortBy">DBGrid.sortBy</a></li>
					
				</ul>
			
		
		</div>
	</div>
	
	<div class="close">
		<h2>
			<span class="name"><a href="02_file.html">Event Management Library</a></span>
			
				<span class="ico"><a href="#"></a></span>
			
		</h2>
		<div class="list">
		
			
				<h3>Constructors</h3>
				<ul>
					
						<li><a href="02_file.html#Events">Events</a></li>
					
				</ul>
			
			
				<h3>Objects</h3>
				<ul>
					
						<li><a href="02_file.html#Events.guid">Events.guid</a></li>
					
				</ul>
			
		
		</div>
	</div>
	
	<div class="close">
		<h2>
			<span class="name"><a href="03_file.html">String Extensions Library</a></span>
			
				<span class="ico"><a href="#"></a></span>
			
		</h2>
		<div class="list">
		
			
				<h3>Constructors</h3>
				<ul>
					
						<li><a href="03_file.html#String">String</a></li>
					
				</ul>
			
			
		
		</div>
	</div>
	
	<div class="close">
		<h2>
			<span class="name"><a href="04_file.html">Visual Effects - Slider Extension</a></span>
			
				<span class="ico"><a href="#"></a></span>
			
		</h2>
		<div class="list">
		
			
				<h3>Constructors</h3>
				<ul>
					
						<li><a href="04_file.html#Visual.sliders">Visual.sliders</a></li>
					
				</ul>
			
			
				<h3>Objects</h3>
				<ul>
					
						<li><a href="04_file.html#Visual.sliders.activeSlider">Visual.sliders.activeSlider</a></li>
					
				</ul>
			
		
		</div>
	</div>
	
	<div class="close">
		<h2>
			<span class="name"><a href="05_file.html">Visual Effects - customHint Extension</a></span>
			
				<span class="ico"><a href="#"></a></span>
			
		</h2>
		<div class="list">
		
			
			
				<h3>Objects</h3>
				<ul>
					
						<li><a href="05_file.html#Examples">Examples</a></li>
					
						<li><a href="05_file.html#Visual.customHint">Visual.customHint</a></li>
					
				</ul>
			
		
		</div>
	</div>
	
	<div class="close">
		<h2>
			<span class="name"><a href="06_file.html">Visual Effects - infoBox Extension</a></span>
			
				<span class="ico"><a href="#"></a></span>
			
		</h2>
		<div class="list">
		
			
			
				<h3>Objects</h3>
				<ul>
					
						<li><a href="06_file.html#Visual.infoBox">Visual.infoBox</a></li>
					
						<li><a href="06_file.html#Visual.infoBox.config.timeout">Visual.infoBox.config.timeout</a></li>
					
				</ul>
			
		
		</div>
	</div>
	
	<div class="close">
		<h2>
			<span class="name"><a href="07_file.html">Visual Effects&Functions Library</a></span>
			
				<span class="ico"><a href="#"></a></span>
			
		</h2>
		<div class="list">
		
			
				<h3>Constructors</h3>
				<ul>
					
						<li><a href="07_file.html#Visual">Visual</a></li>
					
				</ul>
			
			
				<h3>Objects</h3>
				<ul>
					
						<li><a href="07_file.html#Visual.fixedElements">Visual.fixedElements</a></li>
					
						<li><a href="07_file.html#Visual.initFunctions">Visual.initFunctions</a></li>
					
				</ul>
			
		
		</div>
	</div>
	
	<div class="close">
		<h2>
			<span class="name"><a href="08_file.html">aParser</a></span>
			
				<span class="ico"><a href="#"></a></span>
			
		</h2>
		<div class="list">
		
			
				<h3>Constructors</h3>
				<ul>
					
						<li><a href="08_file.html#aParser">aParser</a></li>
					
				</ul>
			
			
		
		</div>
	</div>
	
	<div class="close">
		<h2>
			<span class="name"><a href="09_file.html">cssQuery</a></span>
			
		</h2>
		<div class="list">
		
			
			
		
		</div>
	</div>
	
	<div class="close">
		<h2>
			<span class="name"><a href="10_file.html">dynamicLanguage</a></span>
			
				<span class="ico"><a href="#"></a></span>
			
		</h2>
		<div class="list">
		
			
				<h3>Constructors</h3>
				<ul>
					
						<li><a href="10_file.html#AJAX.dynamicLanguage">AJAX.dynamicLanguage</a></li>
					
				</ul>
			
			
				<h3>Objects</h3>
				<ul>
					
						<li><a href="10_file.html#AJAX.dynamicLanguage._loader">AJAX.dynamicLanguage._loader</a></li>
					
						<li><a href="10_file.html#AJAX.dynamicLanguage._strings">AJAX.dynamicLanguage._strings</a></li>
					
				</ul>
			
		
		</div>
	</div>
	
	<div class="close">
		<h2>
			<span class="name"><a href="11_file.html">quickEdit</a></span>
			
				<span class="ico"><a href="#"></a></span>
			
		</h2>
		<div class="list">
		
			
				<h3>Constructors</h3>
				<ul>
					
						<li><a href="11_file.html#QuickEdit">QuickEdit</a></li>
					
				</ul>
			
			
				<h3>Objects</h3>
				<ul>
					
						<li><a href="11_file.html#QuickEdit.uploadBoxCount">QuickEdit.uploadBoxCount</a></li>
					
				</ul>
			
		
		</div>
	</div>
	
</div>
<!--============= /NAV ==============-->


    
<!--============== DOCS =============-->
<div id="docs">
<pre id="code">
<span class='linenumber'>  1</span> <span class="COMM">/**
<span class='linenumber'>  2</span>  * @fileOverview	A visual effects function library incloding some positioning functions.
<span class='linenumber'>  3</span>  * @name Visual Effects&Functions Library
<span class='linenumber'>  4</span>  *
<span class='linenumber'>  5</span>  * @author	Burak YiÄŸit KAYA	byk@amplio-vita.net
<span class='linenumber'>  6</span>  * @version	1.5
<span class='linenumber'>  7</span>  *
<span class='linenumber'>  8</span>  * @requires	&lt;a href="http://amplio-vita.net/JSLib/js/aV.main.events.js">aV.main.events.js&lt;/a>
<span class='linenumber'>  9</span>  * @copyright &copy;2008 amplio-Vita under &lt;a href="../license.txt" target="_blank">BSD Licence&lt;/a>
<span class='linenumber'> 10</span>  */</span><span class="WHIT">
<span class='linenumber'> 11</span> 
<span class='linenumber'> 12</span> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">Visual</span><span class="PUNC">!=</span><span class="STRN">"undefined"</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'> 13</span> </span><span class="WHIT">	</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">'"Visual" namespace had already been taken!'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"aV.main.visual.js@"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">window.location.href</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">13</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 14</span> 
<span class='linenumber'> 15</span> </span><span class="COMM">/**
<span class='linenumber'> 16</span>  * Represents a namespace, Visual, for the new functions and global parameters of those functions.
<span class='linenumber'> 17</span>  *
<span class='linenumber'> 18</span>  * @namespace
<span class='linenumber'> 19</span>  * @config	{Integer}	slideTreshold	The maximum dimension difference between the current dimension and the target dimension to stop the sliding.
<span class='linenumber'> 20</span>  * @config	{Float}	slideDivisor	The slide functions divide the remaining dimension difference to this number and add the result to the current dimension. The bigger this number gets the slower the slide gets.
<span class='linenumber'> 21</span>  * @config	{Float [0,1]}	fadeTreshold	The maximum opacity difference between the current opacity and the target opacity to stop the fade.
<span class='linenumber'> 22</span>  * @config	{Float}	fadeDivisor	The fade functions divide the remaining opacity difference to this number and add the result to the current opacity. The bigger this number gets the slower the fade gets.
<span class='linenumber'> 23</span>  */</span><span class="WHIT">
<span class='linenumber'> 24</span> </span><span class="NAME">Visual</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 25</span> 
<span class='linenumber'> 26</span> </span><span class="NAME">Visual.config</span><span class="PUNC">=</span><span class="WHIT">
<span class='linenumber'> 27</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 28</span> </span><span class="WHIT">	</span><span class="NAME">slideTreshold</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 29</span> </span><span class="WHIT">	</span><span class="NAME">slideDivisor</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">4</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 30</span> </span><span class="WHIT">	</span><span class="NAME">fadeTreshold</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0.05</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 31</span> </span><span class="WHIT">	</span><span class="NAME">fadeDivisor</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">4</span><span class="WHIT">
<span class='linenumber'> 32</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 33</span> 
<span class='linenumber'> 34</span> </span><span class="COMM">/**
<span class='linenumber'> 35</span>  * Holds the fixed elements recognized by the initEditables function.
<span class='linenumber'> 36</span>  * Changing this property is discouraged.
<span class='linenumber'> 37</span>  *
<span class='linenumber'> 38</span>  * @type HTMLElementObject[]
<span class='linenumber'> 39</span>  */</span><span class="WHIT">
<span class='linenumber'> 40</span> </span><span class="NAME">Visual.fixedElements</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 41</span> 
<span class='linenumber'> 42</span> </span><span class="COMM">/**
<span class='linenumber'> 43</span>  * Holds the user defined initialization functions.
<span class='linenumber'> 44</span>  * Suitable for extending Visual library.
<span class='linenumber'> 45</span>  * &lt;br />A developer can easly add his/her own function as in the example.	
<span class='linenumber'> 46</span>  *
<span class='linenumber'> 47</span>  * @type Function[]
<span class='linenumber'> 48</span>  * @example
<span class='linenumber'> 49</span>  * Visual.initFunctions.add(
<span class='linenumber'> 50</span>  * 	function()
<span class='linenumber'> 51</span>  * 	{
<span class='linenumber'> 52</span>  * 		Visual.myPlugin={}
<span class='linenumber'> 53</span>  * 		Visual.myPlugin.version="1.0";
<span class='linenumber'> 54</span>  * 		Visual.myPlugin.foo=function()
<span class='linenumber'> 55</span>  * 		{
<span class='linenumber'> 56</span>  * 			alert("I'm a function of Visual.myPlugin!");
<span class='linenumber'> 57</span>  * 		}
<span class='linenumber'> 58</span>  * 	}
<span class='linenumber'> 59</span>  * );
<span class='linenumber'> 60</span>  */</span><span class="WHIT">
<span class='linenumber'> 61</span> </span><span class="NAME">Visual.initFunctions</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 62</span> 
<span class='linenumber'> 63</span> </span><span class="COMM">/**
<span class='linenumber'> 64</span>  * Sets the given element's opacity to the given opacity value.
<span class='linenumber'> 65</span>  * 
<span class='linenumber'> 66</span>  * @method
<span class='linenumber'> 67</span>  * @param	{HTMLElementObject}	obj	The HTML element ITSELF whose opacity will be changed.
<span class='linenumber'> 68</span>  * @param	{Float [0,1]}	opacity	The opacity value which the object's opacity will be set to.
<span class='linenumber'> 69</span>  */</span><span class="WHIT">
<span class='linenumber'> 70</span> </span><span class="NAME">Visual.setOpacity</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opacity</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'> 71</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 72</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">document.all</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//if IE</span><span class="WHIT">
<span class='linenumber'> 73</span> </span><span class="WHIT">		</span><span class="NAME">obj.style.filter</span><span class="PUNC">=</span><span class="STRN">"alpha(opacity="</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">opacity</span><span class="PUNC">*</span><span class="NUMB">100</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">")"</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//use filter-alpha</span><span class="WHIT">
<span class='linenumber'> 74</span> </span><span class="WHIT">	</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="COMM">//if not IE</span><span class="WHIT">
<span class='linenumber'> 75</span> </span><span class="WHIT">		</span><span class="NAME">obj.style.opacity</span><span class="PUNC">=</span><span class="NAME">opacity</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//use CSS opacity</span><span class="WHIT">
<span class='linenumber'> 76</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 77</span> 
<span class='linenumber'> 78</span> </span><span class="COMM">/**
<span class='linenumber'> 79</span>  * Tries to get the given element's opacity value.
<span class='linenumber'> 80</span>  * &lt;br />&lt;b>IMPORTANT:&lt;/b> At the moment it can only get the opacity values defined in the object's style property.
<span class='linenumber'> 81</span>  * @return	{Float [0,1]}	If a valid opacity value cannot be gathered, the default return value is 1.
<span class='linenumber'> 82</span>  * @param	{HTMLElementObject}	obj	The HTML element ITSELF whose opacity will tried to be gathered.
<span class='linenumber'> 83</span>  */</span><span class="WHIT">
<span class='linenumber'> 84</span> </span><span class="NAME">Visual.getOpacity</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'> 85</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 86</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">opacity</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 87</span> </span><span class="WHIT">	</span><span class="KEYW">try</span><span class="WHIT">
<span class='linenumber'> 88</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 89</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">document.all</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//if IE</span><span class="WHIT">
<span class='linenumber'> 90</span> </span><span class="WHIT">			</span><span class="NAME">opacity</span><span class="PUNC">=</span><span class="NAME">parseFloat</span><span class="PUNC">(</span><span class="NAME">obj.style.filter.split</span><span class="PUNC">(</span><span class="STRN">'='</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">100</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//extract the alpha value, then parse to float</span><span class="WHIT">
<span class='linenumber'> 91</span> </span><span class="WHIT">		</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="COMM">//if not IE</span><span class="WHIT">
<span class='linenumber'> 92</span> </span><span class="WHIT">			</span><span class="NAME">opacity</span><span class="PUNC">=</span><span class="NAME">parseFloat</span><span class="PUNC">(</span><span class="NAME">obj.style.opacity</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//parse the opacity value to float</span><span class="WHIT">
<span class='linenumber'> 93</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 94</span> </span><span class="WHIT">	</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//if any error occurs then,</span><span class="WHIT">
<span class='linenumber'> 95</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 96</span> </span><span class="WHIT">		</span><span class="NAME">opacity</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//most probable opacity value is one</span><span class="WHIT">
<span class='linenumber'> 97</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 98</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">isNaN</span><span class="PUNC">(</span><span class="NAME">opacity</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//or if opacity cannot be parsed to float, again</span><span class="WHIT">
<span class='linenumber'> 99</span> </span><span class="WHIT">		</span><span class="NAME">opacity</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//most probable opacity value is one</span><span class="WHIT">
<span class='linenumber'>100</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">opacity</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>101</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>102</span> 
<span class='linenumber'>103</span> </span><span class="COMM">/**
<span class='linenumber'>104</span>  * Fades the given HTML element, to the given opacity value with a slowing fade effect.
<span class='linenumber'>105</span>  *
<span class='linenumber'>106</span>  * @method
<span class='linenumber'>107</span>  * @param	{HTMLElementObject}	obj	The HTML element ITSELF which will be faded. It &lt;b>must&lt;/b> have an ID.
<span class='linenumber'>108</span>  * @param	{Float [0,1]}	opacity	The desired/target opacity to be faded to.
<span class='linenumber'>109</span>  * @param	{Boolean}	init	Indicates the user is calling the function, not itself. MUST SET TO BE TRUE ALWAYS.
<span class='linenumber'>110</span>  * @param	{Function(HTMLElementObject)}	[callbackFunc]	The function which will be called immediately after the fade operation is finished.
<span class='linenumber'>111</span>  */</span><span class="WHIT">
<span class='linenumber'>112</span> </span><span class="NAME">Visual.fade</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opacity</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">init</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callbackFunc</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>113</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>114</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">obj.fadeTimer</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//if there is an ongoing fade operation</span><span class="WHIT">
<span class='linenumber'>115</span> </span><span class="WHIT">		</span><span class="NAME">clearTimeout</span><span class="PUNC">(</span><span class="NAME">obj.fadeTimer</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//cancel it</span><span class="WHIT">
<span class='linenumber'>116</span> </span><span class="WHIT">	</span><span class="NAME">obj.fadeTimer</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>117</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>118</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">init</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//if it is a start function, called by USER</span><span class="WHIT">
<span class='linenumber'>119</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>120</span> </span><span class="WHIT">		</span><span class="NAME">obj.fadeCallbackFunc</span><span class="PUNC">=</span><span class="NAME">callbackFunc</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//assign the callbackFunc to the object</span><span class="WHIT">
<span class='linenumber'>121</span> </span><span class="WHIT">		</span><span class="COMM">//obj.style.display="block";</span><span class="WHIT">
<span class='linenumber'>122</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>123</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>124</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">theOpacity</span><span class="PUNC">=</span><span class="NAME">Visual.getOpacity</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//get the object's current opacity</span><span class="WHIT">
<span class='linenumber'>125</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">theOpacity</span><span class="PUNC">-</span><span class="NAME">opacity</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NAME">Visual.config</span><span class="PUNC">[</span><span class="STRN">"fadeTreshold"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//check if the difference between the current opacity and the desired opacity is above the defined treshold limit</span><span class="WHIT">
<span class='linenumber'>126</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>127</span> </span><span class="WHIT">		</span><span class="NAME">Visual.setOpacity</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">theOpacity</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opacity</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">theOpacity</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">Visual.config</span><span class="PUNC">[</span><span class="STRN">"fadeDivisor"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//calculate and set the new opacity</span><span class="WHIT">
<span class='linenumber'>128</span> </span><span class="WHIT">		</span><span class="NAME">obj.fadeTimer</span><span class="PUNC">=</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="STRN">"Visual.fade(document.getElementById('"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">obj.id</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"'), "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">opacity</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">")"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">25</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//set new instance to be called after 25ms</span><span class="WHIT">
<span class='linenumber'>129</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>130</span> </span><span class="WHIT">	</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="COMM">//if the difference is smaller or equal to the defined treshold</span><span class="WHIT">
<span class='linenumber'>131</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>132</span> </span><span class="WHIT">		</span><span class="NAME">Visual.setOpacity</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opacity</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//set the opacity to the desired value for an exact match</span><span class="WHIT">
<span class='linenumber'>133</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">obj.fadeCallbackFunc</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//if a callbackFunction is assigned</span><span class="WHIT">
<span class='linenumber'>134</span> </span><span class="WHIT">			</span><span class="NAME">obj.fadeCallbackFunc</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//call it</span><span class="WHIT">
<span class='linenumber'>135</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>136</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>137</span> 
<span class='linenumber'>138</span> </span><span class="COMM">/**
<span class='linenumber'>139</span>  * Fades the first element to invisiblity and then fades the second element to full opacity.
<span class='linenumber'>140</span>  *
<span class='linenumber'>141</span>  * @method
<span class='linenumber'>142</span>  * @param	{HTMLElementObject}	fromObj	The HTML element which will be FADED OUT.
<span class='linenumber'>143</span>  * @param	{HTMLElementObject}	toObj	The HTML element which will be FADED IN.
<span class='linenumber'>144</span>  * @param	{Function(HTMLElementObject, HTMLElementObject)}	[callbackFunc]	The function which will be called immediately after the whole fade operation is finished. The first parameter passed to the function is fromObj and the second parameter is toObj.
<span class='linenumber'>145</span>  */</span><span class="WHIT">
<span class='linenumber'>146</span> </span><span class="NAME">Visual.fadeFromOneToOne</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">fromObj</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">toObj</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callbackFunc</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>147</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>148</span> </span><span class="WHIT">	</span><span class="NAME">Visual.fade</span><span class="PUNC">(</span><span class="NAME">fromObj</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">//fade the fromObj</span><span class="WHIT">
<span class='linenumber'>149</span> </span><span class="WHIT">				</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">//to 0 opacity(invisible)</span><span class="WHIT">
<span class='linenumber'>150</span> </span><span class="WHIT">				</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>151</span> </span><span class="WHIT">				</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>152</span> </span><span class="WHIT">				</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>153</span> </span><span class="WHIT">					</span><span class="NAME">obj.style.display</span><span class="PUNC">=</span><span class="STRN">"none"</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//and when it becomes invisible, maket its display none to consume no visual space</span><span class="WHIT">
<span class='linenumber'>154</span> </span><span class="WHIT">					</span><span class="NAME">toObj.style.display</span><span class="PUNC">=</span><span class="STRN">"block"</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//and make the toObj contain space in case of its display set to none</span><span class="WHIT">
<span class='linenumber'>155</span> </span><span class="WHIT">					</span><span class="NAME">Visual.fade</span><span class="PUNC">(</span><span class="NAME">toObj</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">//then fade the toObj</span><span class="WHIT">
<span class='linenumber'>156</span> </span><span class="WHIT">								</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">//to full opacity(fully visible)</span><span class="WHIT">
<span class='linenumber'>157</span> </span><span class="WHIT">								</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>158</span> </span><span class="WHIT">								</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>159</span> </span><span class="WHIT">								</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>160</span> </span><span class="WHIT">									</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">window.onresize</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>161</span> </span><span class="WHIT">										</span><span class="NAME">window.onresize</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">type</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"resize"</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//there might be window size change so if a function is assigned to window.onresize and on scroll, call them.</span><span class="WHIT">
<span class='linenumber'>162</span> </span><span class="WHIT">									</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">callbackFunc</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//if a callbackFunc assigned</span><span class="WHIT">
<span class='linenumber'>163</span> </span><span class="WHIT">										</span><span class="NAME">callbackFunc</span><span class="PUNC">(</span><span class="NAME">fromObj</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">toObj</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//call it with giving the fromObj and toObj as its parameters</span><span class="WHIT">
<span class='linenumber'>164</span> </span><span class="WHIT">								</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>165</span> </span><span class="WHIT">								</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>166</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>167</span> </span><span class="WHIT">				</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>168</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>169</span> 
<span class='linenumber'>170</span> </span><span class="COMM">/**
<span class='linenumber'>171</span>  * Slides the given HTML element to the given dimension with a combined fade efect. The effects slow down non-linearly.
<span class='linenumber'>172</span>  *
<span class='linenumber'>173</span>  * @method
<span class='linenumber'>174</span>  * @param	{HTMLElementObject}	obj	The HTML element ITSELF which will be slided. It *MUST* have an ID.
<span class='linenumber'>175</span>  * @param	{Integer}	newDimension	The desired/target height/width to be slided to.
<span class='linenumber'>176</span>  * @param	{Integer [-1,1]}	opcDirection	The opacity change direction identifier. If it is positive the opacity INCREASES with the continuing slide operation and vice versa.
<span class='linenumber'>177</span>  * @param	{Boolean}	horizontalSlide	Defines if the newDimension is a height value or a width value. (Width if true)
<span class='linenumber'>178</span>  * @param	{Boolean}	init	Indicates the user is calling the function, not itself. MUST SET TO BE TRUE ALWAYS.
<span class='linenumber'>179</span>  * @param	{Function(HTMLElementObject)}	[callbackFunc]	The function which will be called immediately after the slide operation is finished.
<span class='linenumber'>180</span>  */</span><span class="WHIT">
<span class='linenumber'>181</span> </span><span class="NAME">Visual.fadeNSlide</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">newDimension</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opcDirection</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">horizontalSlide</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">init</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callbackFunc</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>182</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>183</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">propertyName</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">horizontalSlide</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="STRN">"Width"</span><span class="PUNC">:</span><span class="STRN">"Height"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>184</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>185</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">obj.slideTimer</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//if there is an ongoing slide</span><span class="WHIT">
<span class='linenumber'>186</span> </span><span class="WHIT">		</span><span class="NAME">clearTimeout</span><span class="PUNC">(</span><span class="NAME">obj.slideTimer</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//cancel it</span><span class="WHIT">
<span class='linenumber'>187</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>188</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">init</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//if it is a start function, called by USER</span><span class="WHIT">
<span class='linenumber'>189</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>190</span> </span><span class="WHIT">		</span><span class="NAME">obj</span><span class="PUNC">[</span><span class="STRN">"old"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">propertyName</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">obj.style</span><span class="PUNC">[</span><span class="NAME">propertyName.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">obj.style</span><span class="PUNC">[</span><span class="NAME">propertyName.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">obj</span><span class="PUNC">[</span><span class="STRN">"offset"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">propertyName</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//set the old height if available forum CSS, and if not from the offsetHeight property.</span><span class="WHIT">
<span class='linenumber'>191</span> </span><span class="WHIT">		</span><span class="NAME">obj.slideCallback</span><span class="PUNC">=</span><span class="NAME">callbackFunc</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//assign the callbackFunc to object's slideCallback property</span><span class="WHIT">
<span class='linenumber'>192</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>193</span> 
<span class='linenumber'>194</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">currentDimension</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">obj.style</span><span class="PUNC">[</span><span class="NAME">propertyName.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">obj.style</span><span class="PUNC">[</span><span class="NAME">propertyName.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">obj</span><span class="PUNC">[</span><span class="STRN">"offset"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">propertyName</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//get the current height, seperate from the above *oldHeight*. This is needed for the iteration.</span><span class="WHIT">
<span class='linenumber'>195</span> </span><span class="WHIT">  </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">currentDimension</span><span class="PUNC">-</span><span class="NAME">newDimension</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NAME">Visual.config</span><span class="PUNC">[</span><span class="STRN">"slideTreshold"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//check if the difference between the *currentDimension* and the desired height is above the the defined treshold value</span><span class="WHIT">
<span class='linenumber'>196</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>197</span> </span><span class="WHIT">		</span><span class="NAME">obj.style</span><span class="PUNC">[</span><span class="NAME">propertyName.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">currentDimension</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">newDimension</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">currentDimension</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">Visual.config</span><span class="PUNC">[</span><span class="STRN">"slideDivisor"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//decrease the difference by difference/4 for a non-linear and a smooth slide</span><span class="WHIT">
<span class='linenumber'>198</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">opacity</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">obj.style</span><span class="PUNC">[</span><span class="NAME">propertyName.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">obj</span><span class="PUNC">[</span><span class="STRN">"old"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">propertyName</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">newDimension</span><span class="PUNC">-</span><span class="NAME">obj</span><span class="PUNC">[</span><span class="STRN">"old"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">propertyName</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//calculate the opacity by getting the ratio of the *currentDimension* and the desired height</span><span class="WHIT">
<span class='linenumber'>199</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opcDirection</span><span class="PUNC">&lt;</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//if direction is negative, substitude the opacity from 1, since 1 is the maximum opacity</span><span class="WHIT">
<span class='linenumber'>200</span> </span><span class="WHIT">			</span><span class="NAME">opacity</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">opacity</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>201</span> </span><span class="WHIT">		</span><span class="NAME">Visual.setOpacity</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opacity</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//set the calculated opacity</span><span class="WHIT">
<span class='linenumber'>202</span> </span><span class="WHIT">		</span><span class="NAME">obj.slideTimer</span><span class="PUNC">=</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="STRN">"Visual.fadeNSlide(document.getElementById('"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">obj.id</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"'), "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">newDimension</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">", "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">opcDirection</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">", "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">horizontalSlide</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">");"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">25</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//set new instance, which will be called after 25ms</span><span class="WHIT">
<span class='linenumber'>203</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>204</span> </span><span class="WHIT">	</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="COMM">//if the diffrence is below the defined treshold, time to stop :)</span><span class="WHIT">
<span class='linenumber'>205</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>206</span> </span><span class="WHIT">		</span><span class="NAME">obj.style</span><span class="PUNC">[</span><span class="NAME">propertyName.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">newDimension</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//set the height to the desired height for an exact match</span><span class="WHIT">
<span class='linenumber'>207</span> </span><span class="WHIT">		</span><span class="NAME">Visual.setOpacity</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">newDimension</span><span class="PUNC">&lt;</span><span class="NAME">obj</span><span class="PUNC">[</span><span class="STRN">"old"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">propertyName</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//set opacity</span><span class="WHIT">
<span class='linenumber'>208</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">obj.slideCallback</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">obj.slideCallback</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//call the callbackFunc if it is defined</span><span class="WHIT">
<span class='linenumber'>209</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>210</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">window.onscroll</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>211</span> </span><span class="WHIT">		</span><span class="NAME">window.onscroll</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">type</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"scroll"</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//there might be a scroll change so if a function is assigned to window.onscroll, call it.</span><span class="WHIT">
<span class='linenumber'>212</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>213</span> 
<span class='linenumber'>214</span> </span><span class="COMM">/**
<span class='linenumber'>215</span>  * Moves the given object to the given postion with a slowing move effect.
<span class='linenumber'>216</span>  *
<span class='linenumber'>217</span>  * @method
<span class='linenumber'>218</span>  * @param	{HTMLElementObject}	obj	The HTML element which will be moved.
<span class='linenumber'>219</span>  * @param	{Integer | false}	[xPos]	The target X coordinate of the given HTML element. If it is given as false, the X coordinate is not changed.
<span class='linenumber'>220</span>  * @param	{Integer | false}	[yPos]	The target Y coordinate of the given HTML element. If it is given as false, the Y coordinate is not changed.
<span class='linenumber'>221</span>  * @param	{Boolean}	init	Indicates the user is calling the function, not itself. MUST SET TO BE TRUE ALWAYS.
<span class='linenumber'>222</span>  * @param	{Function(HTMLElementObject)}	[callbackFunc]	The function which will be called immediately after the moving operation is finished.
<span class='linenumber'>223</span>  */</span><span class="WHIT">
<span class='linenumber'>224</span> </span><span class="NAME">Visual.move</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">xPos</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">yPos</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">init</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callbackFunc</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>225</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>226</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">timerNeeded</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//this variable actually defines that if there is way to go to the position or not :)</span><span class="WHIT">
<span class='linenumber'>227</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">obj.moveTimer</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//if there is an ongoing move operation</span><span class="WHIT">
<span class='linenumber'>228</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>229</span> </span><span class="WHIT">		</span><span class="NAME">clearTimeout</span><span class="PUNC">(</span><span class="NAME">obj.moveTimer</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//cancel it</span><span class="WHIT">
<span class='linenumber'>230</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">init</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">obj.moveCallbackFunc</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//if a callBackFunction is assigned</span><span class="WHIT">
<span class='linenumber'>231</span> </span><span class="WHIT">			</span><span class="NAME">obj.moveCallbackFunc</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//call it		</span><span class="WHIT">
<span class='linenumber'>232</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>233</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>234</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">init</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//if it is a start function, called by USER</span><span class="WHIT">
<span class='linenumber'>235</span> </span><span class="WHIT">		</span><span class="NAME">obj.moveCallbackFunc</span><span class="PUNC">=</span><span class="NAME">callbackFunc</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//assign the callBackFunc to the object</span><span class="WHIT">
<span class='linenumber'>236</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>237</span> </span><span class="WHIT">	 </span><span class="COMM">//get the object's current position</span><span class="WHIT">
<span class='linenumber'>238</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">currentXPos</span><span class="PUNC">=</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">obj.style.left</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>239</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">currentYPos</span><span class="PUNC">=</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">obj.style.top</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>240</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">isNaN</span><span class="PUNC">(</span><span class="NAME">currentXPos</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>241</span> </span><span class="WHIT">		</span><span class="NAME">currentXPos</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>242</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">isNaN</span><span class="PUNC">(</span><span class="NAME">currentYPos</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>243</span> </span><span class="WHIT">		</span><span class="NAME">currentYPos</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>244</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>245</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">xPos</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//a forced type+value check is need to prevent this statement become true if xPos is equal to 0</span><span class="WHIT">
<span class='linenumber'>246</span> </span><span class="WHIT">		</span><span class="NAME">xPos</span><span class="PUNC">=</span><span class="NAME">currentXPos</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>247</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>248</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">yPos</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>249</span> </span><span class="WHIT">		</span><span class="NAME">yPos</span><span class="PUNC">=</span><span class="NAME">currentYPos</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>250</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>251</span> </span><span class="WHIT">	</span><span class="COMM">//for x-position</span><span class="WHIT">
<span class='linenumber'>252</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">currentXPos</span><span class="PUNC">-</span><span class="NAME">xPos</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NAME">Visual.config</span><span class="PUNC">[</span><span class="STRN">"slideTreshold"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//check if the difference between the current x-position and the desired *xPos* is above the defined treshold limit</span><span class="WHIT">
<span class='linenumber'>253</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>254</span> </span><span class="WHIT">		</span><span class="NAME">obj.style.left</span><span class="PUNC">=</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">currentXPos</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">xPos</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">currentXPos</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">Visual.config</span><span class="PUNC">[</span><span class="STRN">"slideDivisor"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//calculate and set the new x-position</span><span class="WHIT">
<span class='linenumber'>255</span> </span><span class="WHIT">		</span><span class="NAME">timerNeeded</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>256</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>257</span> </span><span class="WHIT">	</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="COMM">//if the difference is smaller or equal to the defined treshold</span><span class="WHIT">
<span class='linenumber'>258</span> </span><span class="WHIT">		</span><span class="NAME">obj.style.left</span><span class="PUNC">=</span><span class="NAME">xPos</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//set the x-position to the desired value for an exact match</span><span class="WHIT">
<span class='linenumber'>259</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>260</span> </span><span class="WHIT">	</span><span class="COMM">//for y-position</span><span class="WHIT">
<span class='linenumber'>261</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">currentYPos</span><span class="PUNC">-</span><span class="NAME">yPos</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NAME">Visual.config</span><span class="PUNC">[</span><span class="STRN">"slideTreshold"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//check if the difference between the current y-position and the desired *yPos* is above the defined treshold limit</span><span class="WHIT">
<span class='linenumber'>262</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>263</span> </span><span class="WHIT">		</span><span class="NAME">obj.style.top</span><span class="PUNC">=</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">currentYPos</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">yPos</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">currentYPos</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">Visual.config</span><span class="PUNC">[</span><span class="STRN">"slideDivisor"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//calculate and set the new y-position</span><span class="WHIT">
<span class='linenumber'>264</span> </span><span class="WHIT">		</span><span class="NAME">timerNeeded</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>265</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>266</span> </span><span class="WHIT">	</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="COMM">//if the difference is smaller or equal to the defined treshold</span><span class="WHIT">
<span class='linenumber'>267</span> </span><span class="WHIT">		</span><span class="NAME">obj.style.top</span><span class="PUNC">=</span><span class="NAME">yPos</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//set the y-position to the desired value for an exact match</span><span class="WHIT">
<span class='linenumber'>268</span> 
<span class='linenumber'>269</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">timerNeeded</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>270</span> </span><span class="WHIT">		</span><span class="NAME">obj.moveTimer</span><span class="PUNC">=</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="STRN">"Visual.move(document.getElementById('"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">obj.id</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"'), "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">xPos</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">", "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">yPos</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">")"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">25</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//set new instance to be called after 25ms</span><span class="WHIT">
<span class='linenumber'>271</span> </span><span class="WHIT">	</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">obj.moveCallbackFunc</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//if a callBackFunction is assigned</span><span class="WHIT">
<span class='linenumber'>272</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>273</span> </span><span class="WHIT">		</span><span class="NAME">obj.moveCallbackFunc</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//call it</span><span class="WHIT">
<span class='linenumber'>274</span> </span><span class="WHIT">		</span><span class="NAME">obj.moveCallbackFunc</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>275</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>276</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>277</span> 
<span class='linenumber'>278</span> </span><span class="COMM">/**
<span class='linenumber'>279</span>  * This function is called whenever a scroll or resize event is occured. It determines the fixed elements' appropriate new positions and calls "moveElement" to set them.
<span class='linenumber'>280</span>  * &lt;br />Can be called manually to ensure all the fixed elements are in correct place.
<span class='linenumber'>281</span>  *
<span class='linenumber'>282</span>  * @method
<span class='linenumber'>283</span>  */</span><span class="WHIT">
<span class='linenumber'>284</span> </span><span class="NAME">Visual.setFixedElementPositions</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>285</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>286</span> </span><span class="WHIT">	</span><span class="COMM">//below variable definitons are only for not to call the functions repedeatly in the for loop</span><span class="WHIT">
<span class='linenumber'>287</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">visiblePageLeftPosition</span><span class="PUNC">=</span><span class="NAME">Visual.scrollLeft</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>288</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">visiblePageTopPosition</span><span class="PUNC">=</span><span class="NAME">Visual.scrollTop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>289</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">visiblePageWidth</span><span class="PUNC">=</span><span class="NAME">Visual.clientWidth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>290</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">visiblePageHeight</span><span class="PUNC">=</span><span class="NAME">Visual.clientHeight</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>291</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">xPosTemp</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">yPosTemp</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>292</span> </span><span class="WHIT">	</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">Visual.fixedElements.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">--</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//walk throught the fixed elements</span><span class="WHIT">
<span class='linenumber'>293</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>294</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="PUNC">(</span><span class="NAME">Visual.fixedElements</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">xOffset</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="STRN">"number"</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>295</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Visual.fixedElements</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">xOffset</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>296</span> </span><span class="WHIT">				</span><span class="NAME">xPosTemp</span><span class="PUNC">=</span><span class="NAME">visiblePageLeftPosition</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">Visual.fixedElements</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">xOffset</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>297</span> </span><span class="WHIT">			</span><span class="KEYW">else</span><span class="WHIT">
<span class='linenumber'>298</span> </span><span class="WHIT">				</span><span class="NAME">xPosTemp</span><span class="PUNC">=</span><span class="NAME">visiblePageLeftPosition</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">visiblePageWidth</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">Visual.fixedElements</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">xOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">Visual.fixedElements</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">offsetWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>299</span> </span><span class="WHIT">		</span><span class="KEYW">else</span><span class="WHIT">
<span class='linenumber'>300</span> </span><span class="WHIT">			</span><span class="NAME">xPosTemp</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>301</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>302</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="PUNC">(</span><span class="NAME">Visual.fixedElements</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">yOffset</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="STRN">"number"</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>303</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Visual.fixedElements</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">yOffset</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>304</span> </span><span class="WHIT">				</span><span class="NAME">yPosTemp</span><span class="PUNC">=</span><span class="NAME">visiblePageTopPosition</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">Visual.fixedElements</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">yOffset</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>305</span> </span><span class="WHIT">			</span><span class="KEYW">else</span><span class="WHIT">
<span class='linenumber'>306</span> </span><span class="WHIT">				</span><span class="NAME">yPosTemp</span><span class="PUNC">=</span><span class="NAME">visiblePageTopPosition</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">visiblePageHeight</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">Visual.fixedElements</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">yOffset</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">Visual.fixedElements</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">offsetHeight</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>307</span> </span><span class="WHIT">		</span><span class="KEYW">else</span><span class="WHIT">
<span class='linenumber'>308</span> </span><span class="WHIT">			</span><span class="NAME">yPosTemp</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>309</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='linenumber'>310</span> </span><span class="WHIT">		</span><span class="NAME">Visual.move</span><span class="PUNC">(</span><span class="NAME">Visual.fixedElements</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">xPosTemp</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">yPosTemp</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//move them to the appropriate positions</span><span class="WHIT">
<span class='linenumber'>311</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>312</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>313</span> 
<span class='linenumber'>314</span> </span><span class="COMM">/**
<span class='linenumber'>315</span>  * This function initialises the "fixed positioned elements" and adds them to the &lt;a href="#Visual.fixedElements">fixedElements&lt;/a> array.
<span class='linenumber'>316</span>  * &lt;br />It also adds the &lt;a href="#Visual.setFixedElementPositions">setFixedElementPositions&lt;/a> function to window.onresize and window.onscroll event lists.
<span class='linenumber'>317</span>  * &lt;br />The mentioned elements &lt;b>must&lt;/b> have their ID properties set.
<span class='linenumber'>318</span>  * &lt;br />
<span class='linenumber'>319</span>  * &lt;br />The so called "fixed positioned elements" are the ones which has an &lt;b>xOffset&lt;/b> or a &lt;b>yOffset&lt;/b> property(or both of them).
<span class='linenumber'>320</span>  * &lt;br />These properties define the elements' distance from the page's edges. A negative offset means the offset is measured from the opposite edge. (i.e. xOffset="-10" means 10 pixels from right side)
<span class='linenumber'>321</span>  *
<span class='linenumber'>322</span>  * @method
<span class='linenumber'>323</span>  * @example
<span class='linenumber'>324</span>  * &lt;div id="cart" xOffset="-10" yOffset="-10"&gt;&lt;br />I'm your shopping cart and I stay always at the top right corner of your window with a 10px padding&lt;br />&lt;/div&gt;
<span class='linenumber'>325</span>  */</span><span class="WHIT">
<span class='linenumber'>326</span> </span><span class="NAME">Visual.initFixedElements</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>327</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>328</span> </span><span class="WHIT">	</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">Visual.fixedElements</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>329</span> </span><span class="WHIT">	</span><span class="NAME">Visual.fixedElements</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>330</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">list</span><span class="PUNC">=</span><span class="NAME">document.getElementsByTagName</span><span class="PUNC">(</span><span class="STRN">'*'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//get all the elements</span><span class="WHIT">
<span class='linenumber'>331</span> </span><span class="WHIT">	</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">list.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">--</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//walk all the elements</span><span class="WHIT">
<span class='linenumber'>332</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>333</span> </span><span class="WHIT">		</span><span class="NAME">xOffsetTemp</span><span class="PUNC">=</span><span class="NAME">list</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getAttribute</span><span class="PUNC">(</span><span class="STRN">"xOffset"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>334</span> </span><span class="WHIT">		</span><span class="NAME">yOffsetTemp</span><span class="PUNC">=</span><span class="NAME">list</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getAttribute</span><span class="PUNC">(</span><span class="STRN">"yOffset"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>335</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">xOffsetTemp</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">yOffsetTemp</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">//if it is a "fixed-position" element</span><span class="WHIT">
<span class='linenumber'>336</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>337</span> </span><span class="WHIT">			</span><span class="NAME">Visual.fixedElements.push</span><span class="PUNC">(</span><span class="NAME">list</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//add the element to the list</span><span class="WHIT">
<span class='linenumber'>338</span> </span><span class="WHIT">			</span><span class="COMM">//parse the string value into integer at the beginning to make the scroll events faster</span><span class="WHIT">
<span class='linenumber'>339</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">xOffsetTemp</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>340</span> </span><span class="WHIT">				</span><span class="NAME">list</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">xOffset</span><span class="PUNC">=</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">xOffsetTemp</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>341</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">yOffsetTemp</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>342</span> </span><span class="WHIT">				</span><span class="NAME">list</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">yOffset</span><span class="PUNC">=</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">yOffsetTemp</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>343</span> </span><span class="WHIT">			</span><span class="NAME">list</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">style.position</span><span class="PUNC">=</span><span class="STRN">"absolute"</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//make sure the elements positioning is absolute</span><span class="WHIT">
<span class='linenumber'>344</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>345</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>346</span> </span><span class="WHIT">	</span><span class="COMM">//assign the watcher setFixedElementPositions function to the scroll and resize events</span><span class="WHIT">
<span class='linenumber'>347</span> </span><span class="WHIT">	</span><span class="NAME">Events.add</span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"resize"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Visual.setFixedElementPositions</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>348</span> </span><span class="WHIT">	</span><span class="NAME">Events.add</span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"scroll"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Visual.setFixedElementPositions</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>349</span> </span><span class="WHIT">	</span><span class="COMM">//call the setFixedElementPositions function to set the initial positions of the elements when the page is loaded</span><span class="WHIT">
<span class='linenumber'>350</span> </span><span class="WHIT">	</span><span class="NAME">Visual.setFixedElementPositions</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>351</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>352</span> 
<span class='linenumber'>353</span> </span><span class="COMM">/** &lt;a href="http://www.softcomplex.com/docs/get_window_size_and_scrollbar_position.html">External&lt;/a> page&scroll size functions */</span><span class="WHIT">
<span class='linenumber'>354</span> 
<span class='linenumber'>355</span> </span><span class="COMM">/**
<span class='linenumber'>356</span>  * Returns the internal usable width of the page.
<span class='linenumber'>357</span>  *
<span class='linenumber'>358</span>  * @return	{Integer}
<span class='linenumber'>359</span>  */</span><span class="WHIT">
<span class='linenumber'>360</span> </span><span class="NAME">Visual.clientWidth</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>361</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>362</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Visual._filterResults</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>363</span> </span><span class="WHIT">		</span><span class="NAME">window.innerWidth</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">window.innerWidth</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>364</span> </span><span class="WHIT">		</span><span class="NAME">document.documentElement</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">document.documentElement.clientWidth</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>365</span> </span><span class="WHIT">		</span><span class="NAME">document.body</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">document.body.clientWidth</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT">
<span class='linenumber'>366</span> </span><span class="WHIT">	</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>367</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>368</span> 
<span class='linenumber'>369</span> </span><span class="COMM">/**
<span class='linenumber'>370</span>  * Returns the internal usable height of the page.
<span class='linenumber'>371</span>  *
<span class='linenumber'>372</span>  * @return	{Integer}
<span class='linenumber'>373</span>  */</span><span class="WHIT">
<span class='linenumber'>374</span> </span><span class="NAME">Visual.clientHeight</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>375</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>376</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Visual._filterResults</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>377</span> </span><span class="WHIT">		</span><span class="NAME">window.innerHeight</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">window.innerHeight</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>378</span> </span><span class="WHIT">		</span><span class="NAME">document.documentElement</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">document.documentElement.clientHeight</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>379</span> </span><span class="WHIT">		</span><span class="NAME">document.body</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">document.body.clientHeight</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT">
<span class='linenumber'>380</span> </span><span class="WHIT">	</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>381</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>382</span> 
<span class='linenumber'>383</span> </span><span class="COMM">/**
<span class='linenumber'>384</span>  * Returns the scroll offset of the page from the left.
<span class='linenumber'>385</span>  *
<span class='linenumber'>386</span>  * @return	{Integer}
<span class='linenumber'>387</span>  */</span><span class="WHIT">
<span class='linenumber'>388</span> </span><span class="NAME">Visual.scrollLeft</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>389</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>390</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Visual._filterResults</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>391</span> </span><span class="WHIT">		</span><span class="NAME">window.pageXOffset</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">window.pageXOffset</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>392</span> </span><span class="WHIT">		</span><span class="NAME">document.documentElement</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">document.documentElement.scrollLeft</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>393</span> </span><span class="WHIT">		</span><span class="NAME">document.body</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">document.body.scrollLeft</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT">
<span class='linenumber'>394</span> </span><span class="WHIT">	</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>395</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>396</span> 
<span class='linenumber'>397</span> </span><span class="COMM">/**
<span class='linenumber'>398</span>  * Returns the scroll offset of the page from the top.
<span class='linenumber'>399</span>  *
<span class='linenumber'>400</span>  * @return	{Integer}
<span class='linenumber'>401</span>  */</span><span class="WHIT">
<span class='linenumber'>402</span> </span><span class="NAME">Visual.scrollTop</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>403</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>404</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Visual._filterResults</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>405</span> </span><span class="WHIT">		</span><span class="NAME">window.pageYOffset</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">window.pageYOffset</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>406</span> </span><span class="WHIT">		</span><span class="NAME">document.documentElement</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">document.documentElement.scrollTop</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>407</span> </span><span class="WHIT">		</span><span class="NAME">document.body</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">document.body.scrollTop</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT">
<span class='linenumber'>408</span> </span><span class="WHIT">	</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>409</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>410</span> 
<span class='linenumber'>411</span> </span><span class="COMM">/**
<span class='linenumber'>412</span>  * Filters the given values for a cross-browser compatibility.
<span class='linenumber'>413</span>  *
<span class='linenumber'>414</span>  * @private
<span class='linenumber'>415</span>  * @deprecated Do not use directly.
<span class='linenumber'>416</span>  * @return	{Integer}
<span class='linenumber'>417</span>  */</span><span class="WHIT">
<span class='linenumber'>418</span> </span><span class="NAME">Visual._filterResults</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">n_win</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">n_docel</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">n_body</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>419</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>420</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n_result</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">n_win</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">n_win</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>421</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">n_docel</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">n_result</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">n_result</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">n_docel</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>422</span> </span><span class="WHIT">		</span><span class="NAME">n_result</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">n_docel</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>423</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n_body</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">n_result</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">n_result</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">n_body</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">n_body</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">n_result</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>424</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>425</span> </span><span class="COMM">/** End of external code */</span><span class="WHIT">
<span class='linenumber'>426</span> 
<span class='linenumber'>427</span> </span><span class="COMM">/** External code from unknown author, if you know the author, please notify me */</span><span class="WHIT">
<span class='linenumber'>428</span> 
<span class='linenumber'>429</span> </span><span class="COMM">/**
<span class='linenumber'>430</span>  * Gets the CSS rule element whose name is given with ruleName parameter or deletes it providing to the deleteFlag's state.
<span class='linenumber'>431</span>  *
<span class='linenumber'>432</span>  * @return	{CSSRuleElementObject}
<span class='linenumber'>433</span>  * @param	{String}	ruleName	The name of the CSS rule which will be returned.
<span class='linenumber'>434</span>  * @param	{Boolean}	[deleteFlag]	Set to true if you want to delete the CSS rule whose name is given in the ruleName parameter.
<span class='linenumber'>435</span>  */</span><span class="WHIT">
<span class='linenumber'>436</span> </span><span class="NAME">Visual.getCSSRule</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ruleName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">deleteFlag</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>437</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>438</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">document.styleSheets</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>439</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>440</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">document.styleSheets.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>441</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>442</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">styleSheet</span><span class="PUNC">=</span><span class="NAME">document.styleSheets</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>443</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ii</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>444</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cssRule</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>445</span> </span><span class="WHIT">			</span><span class="KEYW">do</span><span class="WHIT">
<span class='linenumber'>446</span> </span><span class="WHIT">			</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>447</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">styleSheet.cssRules</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>448</span> </span><span class="WHIT">					</span><span class="NAME">cssRule</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">styleSheet.cssRules</span><span class="PUNC">[</span><span class="NAME">ii</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>449</span> </span><span class="WHIT">				</span><span class="KEYW">else</span><span class="WHIT">
<span class='linenumber'>450</span> </span><span class="WHIT">					</span><span class="NAME">cssRule</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">styleSheet.rules</span><span class="PUNC">[</span><span class="NAME">ii</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>451</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">cssRule</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>452</span> </span><span class="WHIT">				</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>453</span> </span><span class="WHIT">					</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">cssRule.selectorText</span><span class="PUNC">==</span><span class="NAME">ruleName</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>454</span> </span><span class="WHIT">					</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>455</span> </span><span class="WHIT">						</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">deleteFlag</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>456</span> </span><span class="WHIT">						</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>457</span> </span><span class="WHIT">							</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">styleSheet.cssRules</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>458</span> </span><span class="WHIT">								</span><span class="NAME">styleSheet.deleteRule</span><span class="PUNC">(</span><span class="NAME">ii</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>459</span> </span><span class="WHIT">							</span><span class="KEYW">else</span><span class="WHIT">
<span class='linenumber'>460</span> </span><span class="WHIT">								</span><span class="NAME">styleSheet.removeRule</span><span class="PUNC">(</span><span class="NAME">ii</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>461</span> </span><span class="WHIT">							</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>462</span> </span><span class="WHIT">						</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>463</span> </span><span class="WHIT">						</span><span class="KEYW">else</span><span class="WHIT">
<span class='linenumber'>464</span> </span><span class="WHIT">							</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">cssRule</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>465</span> </span><span class="WHIT">					</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>466</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>467</span> </span><span class="WHIT">				</span><span class="NAME">ii</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>468</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>469</span> </span><span class="WHIT">			</span><span class="KEYW">while</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">cssRule</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>470</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>471</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>472</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>473</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>474</span> </span><span class="COMM">/** end of unknown author's external code */</span><span class="WHIT">
<span class='linenumber'>475</span> 
<span class='linenumber'>476</span> 
<span class='linenumber'>477</span> </span><span class="COMM">/** code from Firefox-WebDeveloper Toolbar Extension */</span><span class="WHIT">
<span class='linenumber'>478</span> 
<span class='linenumber'>479</span> </span><span class="COMM">/**
<span class='linenumber'>480</span>  * Gathers the REAL position of the given HTML element.
<span class='linenumber'>481</span>  *
<span class='linenumber'>482</span>  * @private
<span class='linenumber'>483</span>  * @deprecated Use getElementPositionX and getElementPositionY instead.
<span class='linenumber'>484</span>  * @return	{Integer}
<span class='linenumber'>485</span>  * @param	{HTMLElementObject}	element	The HTML element whose position to be gathered.
<span class='linenumber'>486</span>  * @param	{Boolean}	[xPosition]	Set true to get the X coordinate, false for Y coordinate.
<span class='linenumber'>487</span>  */</span><span class="WHIT">
<span class='linenumber'>488</span> </span><span class="NAME">Visual._getElementPosition</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">element</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">xPosition</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>489</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>490</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">position</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>491</span> 
<span class='linenumber'>492</span> </span><span class="WHIT">	</span><span class="COMM">// If the element is set</span><span class="WHIT">
<span class='linenumber'>493</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">element</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>494</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>495</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementOffsetParent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">element.offsetParent</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>496</span> 
<span class='linenumber'>497</span> </span><span class="WHIT">			</span><span class="COMM">// If the element has an offset parent</span><span class="WHIT">
<span class='linenumber'>498</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">elementOffsetParent</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>499</span> </span><span class="WHIT">			</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>500</span> </span><span class="WHIT">					</span><span class="COMM">// While there is an offset parent</span><span class="WHIT">
<span class='linenumber'>501</span> </span><span class="WHIT">					</span><span class="KEYW">while</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">elementOffsetParent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">element.offsetParent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>502</span> </span><span class="WHIT">					</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>503</span> </span><span class="WHIT">							</span><span class="COMM">// If getting the x position</span><span class="WHIT">
<span class='linenumber'>504</span> </span><span class="WHIT">							</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">xPosition</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>505</span> </span><span class="WHIT">							</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>506</span> </span><span class="WHIT">									</span><span class="NAME">position</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">element.offsetLeft</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>507</span> </span><span class="WHIT">							</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>508</span> </span><span class="WHIT">							</span><span class="KEYW">else</span><span class="WHIT">
<span class='linenumber'>509</span> </span><span class="WHIT">							</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>510</span> </span><span class="WHIT">									</span><span class="NAME">position</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">element.offsetTop</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>511</span> </span><span class="WHIT">							</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>512</span> 
<span class='linenumber'>513</span> </span><span class="WHIT">							</span><span class="NAME">element</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">elementOffsetParent</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>514</span> </span><span class="WHIT">					</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>515</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>516</span> </span><span class="WHIT">			</span><span class="KEYW">else</span><span class="WHIT">
<span class='linenumber'>517</span> </span><span class="WHIT">			</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>518</span> </span><span class="WHIT">					</span><span class="COMM">// If getting the x position</span><span class="WHIT">
<span class='linenumber'>519</span> </span><span class="WHIT">					</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">xPosition</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>520</span> </span><span class="WHIT">					</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>521</span> </span><span class="WHIT">							</span><span class="NAME">position</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">element.offsetLeft</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>522</span> </span><span class="WHIT">					</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>523</span> </span><span class="WHIT">					</span><span class="KEYW">else</span><span class="WHIT">
<span class='linenumber'>524</span> </span><span class="WHIT">					</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>525</span> </span><span class="WHIT">							</span><span class="NAME">position</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">element.offsetTop</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>526</span> </span><span class="WHIT">					</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>527</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>528</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>529</span> 
<span class='linenumber'>530</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">position</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>531</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>532</span> 
<span class='linenumber'>533</span> </span><span class="COMM">/**
<span class='linenumber'>534</span>  * Gets the x position of the element.
<span class='linenumber'>535</span>  *
<span class='linenumber'>536</span>  * @return	{Integer}
<span class='linenumber'>537</span>  * @param	{HTMLElementObject}	element	The HTML element whose x position to be gathered.
<span class='linenumber'>538</span>  */</span><span class="WHIT">
<span class='linenumber'>539</span> </span><span class="NAME">Visual.getElementPositionX</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">element</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>540</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>541</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Visual._getElementPosition</span><span class="PUNC">(</span><span class="NAME">element</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>542</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>543</span> 
<span class='linenumber'>544</span> </span><span class="COMM">/**
<span class='linenumber'>545</span>  * Gets the y position of the element.
<span class='linenumber'>546</span>  * @return	{Integer}
<span class='linenumber'>547</span>  * @param	{HTMLElementObject}	element	The HTML element whose y position to be gathered.
<span class='linenumber'>548</span>  */</span><span class="WHIT">
<span class='linenumber'>549</span> </span><span class="NAME">Visual.getElementPositionY</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">element</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>550</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>551</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Visual._getElementPosition</span><span class="PUNC">(</span><span class="NAME">element</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>552</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>553</span> 
<span class='linenumber'>554</span> </span><span class="COMM">/** end of the code from Firefox-WebDeveloper Toolbar Extension */</span><span class="WHIT">
<span class='linenumber'>555</span> 
<span class='linenumber'>556</span> </span><span class="COMM">/**
<span class='linenumber'>557</span>  * Initializes the Visual system.
<span class='linenumber'>558</span>  * Loops through the initFunctions array and calls every function in the array.
<span class='linenumber'>559</span>  * After the loop is done, calls &lt;a href="#Visual.initFixedElements">initFixedElements&lt;/a>.
<span class='linenumber'>560</span>  * Attached to the window.onload event automatically.
<span class='linenumber'>561</span>  *
<span class='linenumber'>562</span>  * @method
<span class='linenumber'>563</span>  */</span><span class="WHIT">
<span class='linenumber'>564</span> </span><span class="NAME">Visual.init</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>565</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>566</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">Events</span><span class="PUNC">==</span><span class="STRN">"undefined"</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>567</span> </span><span class="WHIT">		</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Event functions cannot be found!"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"aV.main.visual.js@"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">window.location.href</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">467</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>568</span> </span><span class="WHIT">	</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">max</span><span class="PUNC">=</span><span class="NAME">Visual.initFunctions.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">max</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>569</span> </span><span class="WHIT">		</span><span class="NAME">Visual.initFunctions</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>570</span> </span><span class="WHIT">	</span><span class="NAME">Visual.initFixedElements</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>571</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>572</span> 
<span class='linenumber'>573</span> </span><span class="NAME">Events.add</span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'load'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Visual.init</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>574</span> </span>
</pre>
</div>
<!--============= /DOCS =============-->



</div>



<!--============= FOOTER ============-->
<div id="footer">
	<ul>
		<li>
			JsDoc.
		</li>
		<li>
			Generated by
			<a href="http://jsdoctoolkit.org/">JsDoc Toolkit</a> 1.4.1
			with <a href="http://lib.metatype.jp/madtemplate/">mad template</a>.
		</li>
		
	</ul>
</div>
<!--============ /FOOTER ============-->



</div>
</body>
</html>